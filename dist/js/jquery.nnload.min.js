(function(c){var e=window;var d=document;var g=c(e);var f=c(d);c.fn.nnload=function(h){return new b(this,h)};var b=function(i,h){var j=this;j.element=i;j.loading=false;j.isData=true;j.autoLoad=true;j._threshold=0;j.init(h)};b.prototype.init=function(h){var i=this;i.opts=c.extend({},{"autoLoad":i.autoLoad,"btn_more_class":"loading-more","threshold":i._threshold,"loading_class":"loading","content_class":"list","loading_msg":"<div class='loading-ing'></div><div class='loading-ing'></div><div class='loading-ing'></div>","noData_msg":"<div class='loading-success'>加载完成</div>","loadData":""},h);i.element.append("<div class='"+i.opts.loading_class+"'>");if(f.height()==g.height()&&i.isData==true&&i.loading==false){a(i)}c(".loading").on("click",".loading-more",function(){a(i)});g.on("scroll",function(){if(g.scrollTop()+g.height()+i.opts.threshold>=f.height()&&g.scrollTop()>i.opts.threshold){if(!i.loading&&i.isData){if(i.opts.autoLoad){a(i)}else{c("."+i.opts.loading_class).html("<div class='"+i.opts.btn_more_class+"'>点击加载更多</div>")}}}})};b.prototype.noData=function(h){var i=this;if(h===undefined||h==true){i.isData=true}else{if(h==false){i.isData=false}}};b.prototype.resetLoad=function(){var h=this;if(h.loading){h.loading=false}if(h.isData){h.isData=true;c("."+h.opts.loading_class).html("")}else{h.isData=false;c("."+h.opts.loading_class).html(h.opts.noData_msg)}if(f.height()<=g.height()&&h.isData==true&&h.loading==false){a(h)}};function a(h){h.loading=true;c("."+h.opts.loading_class).html(h.opts.loading_msg);h.opts.loadData(h)}})(jQuery);